{
	order forward_proxy before reverse_proxy
	admin off # 禁用 admin API
	persist_config off
	log {
		output file /var/log/caddy/error.log # 错误日志目录
		format console
		level ERROR
	}
	log log0 {
		output file /var/log/caddy/access.log # 访问日志目录
		format console
		include http.log.access.log0
	}

	email your@email.com # 修改为自己的电子邮箱

	servers :443 {
		protocols h3 h2 h1
	}
}

server.example.com { # 修改为自己的域名，注意逗号与域名之间有一个空格
	tls {
		protocols tls1.3
	}

	log log0 # 启用访问日志

	forward_proxy {
        port 443
        basic_auth user pass # 用户名和密码
        hide_ip
        hide_via
        probe_resistance
    }

	@host {
		host server.example.com # 禁止以 IP 方式访问网站，修改为自己的域名
	}
	header @host {
		Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" # 启用 HSTS
	}
	reverse_proxy @host 127.0.0.1:12345 # 反向代理到其他应用
}